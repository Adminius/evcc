<template>
	<div class="root">
		<h1>Plan</h1>
		<div class="prices">
			<div v-for="price in priceSlots" :key="price.start" class="price">
				{{ fmtPricePerKWh(price.price, currency).replace("/kWh", "") }}
				<div class="box" :style="priceStyle(price.price)"></div>
			</div>
		</div>
		<hr />
		<div class="chargingSlots">
			<div
				v-for="chargingSlot in chargingSlots"
				:key="chargingSlot.start"
				class="chargingSlot"
			>
				<shopicon-filled-lightning class="icon" size="s"></shopicon-filled-lightning>
			</div>
		</div>
	</div>
</template>

<script>
import "@h2d2/shopicons/es/filled/lightning";
import formatter from "../mixins/formatter";

export default {
	name: "TargetChargePlan",
	mixins: [formatter],
	props: {
		priceSlots: Array,
		co2Slots: Array,
		chargingSlots: Array,
		currency: String,
		energyPrice: Number,
		targetTime: String,
	},
	computed: {
		maxPrice() {
			let result = 0;
			this.priceSlots.forEach(({ price }) => {
				result = Math.max(result, price);
			});
			return result;
		},
	},
	methods: {
		priceStyle(price) {
			return { height: `${(100 / this.maxPrice) * price}%` };
		},
	},
};
</script>

<style scoped>
.root {
	overflow: hidden;
}
.prices {
	display: flex;
	height: 100px;
	justify-content: stretch;
}
.price {
	flex-basis: 0;
	flex-grow: 1;
	flex-shrink: 1;
	margin: 4px;
	text-align: center;
	height: 100%;
	display: flex;
	justify-content: flex-end;
	flex-direction: column;
}
.box {
	background-color: orange;
	border-radius: 10px 10px 0 0;
}
.chargingSlots {
	display: flex;
}
.chargingSlot {
	margin-left: 34%;
	height: 1.4rem;
	width: 30%;
	background-color: var(--evcc-dark-green);
	border-radius: 10px;
	display: flex;
	justify-content: center;
}

.chargingSlot .icon {
	color: #333;
	position: relative;
}
</style>
